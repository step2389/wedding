---
const title = "RSVP";
const subtitle = "Facci sapere se verrai al nostro matrimonio";
---

<section id="rsvp" class="py-16 px-4 bg-[var(--color-background)]">
  
  <div class="max-w-xl mx-auto border border-[var(--color-background)] rounded-[2rem] px-6 py-8
              bg-[var(--color-primary)] shadow-sm">
    <h2 class="text-center text-xl tracking-[0.2em] uppercase text-[var(--color-background)] mb-4">
      RSVP
    </h2>
    <p class="text-center text-[15px] text-[var(--color-background)] mb-8">
      Facci sapere se sarai con noi nel nostro giorno speciale.
    </p>

    <!-- FORM -->
    <form
      action="https://api.web3forms.com/submit"
      method="POST"
      class="space-y-4 text-[15px] text-[var(--color-background)]"
    >
      <input type="hidden" name="access_key" value="2bd3aa52-27fe-48ec-9180-a2679432af07" />
      <input type="hidden" name="subject" value="Nuovo RSVP matrimonio" />
      <input type="hidden" name="from_name" value="Wedding Site" />

      <div>
        <label class="block mb-1">Nome e cognome</label>
        <input
          name="name"
          type="text"
          required
          class="w-full border border-[var(--color-background)] rounded-full px-4 py-2
                 bg-transparent placeholder:text-[var(--color-background)] focus:outline-none
                 focus:border-[var(--color-background)]"
        />
      </div>

      <div>
        <label class="block mb-1">Email</label>
        <input
          name="email"
          type="email"
          class="w-full border border-[var(--color-background)] rounded-full px-4 py-2
                 bg-transparent placeholder:text-[var(--color-background)] focus:outline-none
                 focus:border-[var(--color-background)]"
          placeholder="(opzionale)"
        />
      </div>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
  <div>
    <label class="block mb-1">Parteciperai?</label>
    <select
      id="attending"
      name="attending"
      class="w-full border border-[var(--color-background)] rounded-full px-4 py-2
             bg-transparent focus:outline-none focus:border-[var(--color-background)]"
      required
    >
      <option value="yes">Sì, ci sarò</option>
      <option value="no">Purtroppo no</option>
    </select>
  </div>

  <div>
    <label class="block mb-1">Numero persone</label>
    <input
      id="guests"
      name="guests"
      type="number"
      min="1"
      class="w-full border border-[var(--color-background)] rounded-full px-4 py-2
             bg-transparent placeholder:text-[var(--color-background)]
             focus:outline-none focus:border-[var(--color-background)]"
    />
  </div>
</div>       

      <div>
        <label class="block mb-1">Allergie / Note (opzionale)</label>
        <textarea
          name="notes"
          rows="3"
          class="w-full border border-[var(--color-background)] rounded-2xl px-4 py-2
                 bg-transparent placeholder:text-[var(--color-background)] focus:outline-none
                 focus:border-[var(--color-background)]"
        ></textarea>
      </div>

      <input
        type="hidden"
        name="redirect"
        value="https://wedding-anna-stefano.penz23.org/grazie"
      />

      <button
        type="submit"
        class="mt-4 w-full border border-[var(--color-background)] rounded-full py-3
               text-center text-[15px] tracking-[0.15em] uppercase
               text-[#1f1410] bg-transparent hover:bg-[var(--color-background)]
               transition-colors"
      >
        Invia conferma
      </button>
    </form>
  </div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const attending = document.getElementById("attending");
    const guests = document.getElementById("guests");

    function updateGuestsRequirement() {
      if (attending.value === "yes") {
        guests.required = true;
        guests.min = 1;
      } else {
        guests.required = false;
        guests.removeAttribute("min");
        guests.value = "";
      }
    }

    attending.addEventListener("change", updateGuestsRequirement);
    updateGuestsRequirement();
  });
</script>

</section>